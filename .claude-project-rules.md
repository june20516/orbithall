# Orbithall 프로젝트 작업 지침

이 문서는 Claude가 Orbithall 프로젝트에서 작업할 때 따라야 할 규칙과 지침입니다.

## 핵심 원칙

### 1. 사람이 협업 가능한 코드만 작성
- **자동 생성 파일은 절대 직접 작성하지 않음**
  - `go.sum`: Go 명령어가 자동 생성
  - `package-lock.json`, `yarn.lock`: npm/yarn이 자동 생성
  - 기타 빌드 아티팩트, 캐시 파일 등
- 이유: 사람은 이런 파일을 직접 작성하지 않으며, 자동 생성되어야 함

### 2. 자동 생성 파일 처리 방법
- Dockerfile에서 선택적 복사 패턴 사용
  ```dockerfile
  COPY go.mod ./
  COPY go.su[m] ./ 2>/dev/null || true
  ```
- .gitignore에 자동 생성 파일 명시
- 사용자에게 명령어로 생성하도록 안내

## 기술 스택 및 도구

### Backend
- **언어**: Go 1.21
- **프레임워크**: Chi만 사용 (다른 프레임워크 제안 금지)
- **데이터베이스**: PostgreSQL 16

### 개발 환경
- **컨테이너화**: Docker 우선 (로컬 설치 최소화)
- **이유**: 다른 환경에 영향 최소화, 격리된 개발 환경
- Go, PostgreSQL 등은 로컬에 설치하지 않고 Docker로 실행

### 배포
- **플랫폼**: Railway
- **프리티어 정보**: Fly.io는 프리티어 없음 (사용자는 레거시 계정이 아님)

## 코드 작성 규칙

### 주석
- **대상**: Go를 모르는 사람도 이해할 수 있을 정도로 상세하게
- **스타일**: 간결하고 명확한 표현
- **금지**: 이모지, 과도한 장식
- **예시**:
  ```go
  // Chi 라우터 생성
  // Chi는 가볍고 빠른 HTTP 라우터 라이브러리
  r := chi.NewRouter()
  ```

### 언어
- **모든 응답 및 주석**: 한국어
- **코드 변수/함수명**: 영어 (관례)
- **커밋 메시지**: 영어 (관례)

### 이모지 사용
- **원칙**: 절대 사용하지 않음
- **예외**: 사용자가 명시적으로 요청한 경우만

## 프로젝트 관련 결정사항

### 아키텍처
- **패턴**: 임베드형 댓글 시스템 (Disqus 스타일)
- **연동**: codeverse 블로그 (Next.js SSG, localhost:3000)
- **API 포트**: 8080

### 보안
- 최소한의 보안 구성 필요 (추후 구현)
  - CORS 설정
  - Rate Limiting
  - Input Validation
  - Origin 검증
  - 간단한 인증 (이름+비밀번호)

### 디렉토리 구조
```
orbithall/
├── cmd/api/          # 애플리케이션 진입점
├── internal/         # 내부 패키지
│   ├── handlers/
│   ├── models/
│   └── database/
├── .air.toml         # Hot reload 설정
├── docker-compose.yml
├── Dockerfile
└── go.mod
```

## 작업 프로세스

### 새 파일 생성
1. 필요성 확인
2. 사람이 직접 작성하는 파일인지 검증
3. 충분한 주석 포함
4. .gitignore 업데이트 (필요 시)

### 설정 파일 수정
1. 기존 파일 읽기
2. 논리적 오류 검증
3. 주석 추가/수정
4. 변경 사항 설명

### Docker 관련
- `docker-compose up`: 로컬 개발 환경 실행
- 볼륨을 사용해 데이터 영속성 보장
- healthcheck로 의존성 순서 제어

## 금지 사항

1. **자동 생성 파일 직접 작성**
2. **이모지 사용** (명시적 요청 외)
3. **Chi 외 프레임워크 제안** (이미 결정됨)
4. **로컬 설치 제안** (Docker 우선)
5. **불필요한 설명** (간결함 유지)

## 연동 프로젝트 정보

### codeverse (블로그)
- 위치: `/Users/bran/personal/codeverse`
- 프레임워크: Next.js 13.4.4
- 빌드: SSG (Static Site Generation)
- 개발 포트: 3000
- 마크다운 기반 블로그

### 연동 방식
```typescript
// 블로그에서 API 호출 예시
fetch('http://localhost:8080/api/comments?postId=123')
```

## 참고사항

### 사용자 환경
- macOS (Darwin 24.6.0)
- 작업 디렉토리: `/Users/bran/personal/orbithall`
- Docker Desktop 설치됨
- Go 로컬 설치 안 됨 (의도적)
- PostgreSQL 로컬 설치 안 됨 (의도적)

### 개발 경험
- Go 백엔드 경험 거의 없음
- Next.js/TypeScript는 숙련됨
- Docker 사용 가능

## 문서화

### README.md
- 프로젝트 개요
- 기술 스택
- 로컬 개발 가이드
- API 엔드포인트
- 유용한 명령어 모음

### 코드 주석
- 모든 주요 코드 블록에 설명
- Go 초보자도 이해 가능한 수준
- 간결하고 정확한 표현

---

**최종 업데이트**: 2025-10-01
**프로젝트 단계**: 초기 설정 완료, 기본 서버 구현 완료
